<!--====================================================================== -->
<!--== E~CUBE == -->
<!--==******************************************************************== -->
<!--== AUTHOR : Jean-Pierre Jerome (JPJ) == -->
<!--== DATE : 13.08.2019 == -->
<!--== GAPID : G01.001.05 == -->
<!--==******************************************************************== -->
<!--== DESCRIPTION : SR 622921 – A FIORI front end app for == -->
<!--== labor, temporary workers, equipment, == -->
<!--== equipments, supplies, subcontracting, == -->
<!--== production quantities == -->
<!--== COPY of ZCPJD1 – DEV 00549 from KHEOPS == -->
<!--====================================================================== -->
<!--== MODIFICATIONS HISTORY == -->
<!--====================================================================== -->
<!--== DATE AUTHOR SR NUM IDEN. TRANS. REQ == -->
<!--==******************************************************************== -->
<!-- 23.08.2019 JPJEROME 622921 JPJ TR XXXXXXXXXX -->
<!--====================================================================== -->
<mvc:View
	controllerName="zwo.ui.wks_rep.controller.labor.LaborDet" xmlns="sap.m"
	xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"
	xmlns:t="sap.m.table" xmlns:l="sap.ui.layout"
	busy="{LaborDetView>/busy}"
	busyIndicatorDelay="{LaborDetView>/BusyDelay}">
	<Page id="labordet"
		class="detailHeader sapUiNoMargin sapUiNoContentPadding"
		enableScrolling="true"
		showHeader="{= ${ ${device>/system/tablet} &amp;&amp; ${device>/orientation/portrait} } || ${device>/system/phone} }">
		<content>
			<Panel id="laborHeaderPnl" class="laborDetails">
				<Toolbar height="auto" class="laborDetHeader">
					<VBox width="200px" class="sapUiSmallMarginBegin">
						<Text text="{EmployeeName}" class="myMasterBigFont" />
						<Text text="{EmployeeNo}" class="myMasterSmallFont" />
					</VBox>
					<ToolbarSpacer />
					<VBox width="200px" class="sapUiSmallMarginEnd sapUiNoMargin"
						alignItems="End">
						<Button icon="sap-icon://edit" press="onPressLaborEdit"
							type="Transparent"
							enabled="{path:'IntStatus', formatter: '.formatter.enableMasterEditBtn'}"
							tooltip="{i18n>edit}" />
						<HBox>
							<Text text="{Price}" class="myMasterBigFont" required="true"
								editable="true" />
							<Text
								text="{path: 'Currency', formatter:'.formatter.setEmptyString'}"
								class="myMasterBigFont" />
						</HBox>
						<Text text="{i18n>UnitPrice}" class="myMasterMediumFont" />
					</VBox>
				</Toolbar>
				<Toolbar height="auto" class="sapUiSmallMarginTop">
					<VBox class="sapUiSmallMarginBegin sapUiNoPadding">
						<Text text="{MuName}" />
						<Text text="{Mu}" />
					</VBox>
					<ToolbarSpacer
						visible="{= ${InScreenFilters>/ProjectSet/Country} === 'QC'}" />
					<VBox class="sapUiSmallMarginBegin sapUiNoPadding">
						<Text text="{i18n>activityType}" />
						<Text text="{ActivityType}" required="true" />
					</VBox>
					<ToolbarSpacer
						visible="{= ${InScreenFilters>/ProjectSet/Country} === 'QC'}" />
					<VBox class="sapUiSmallMarginBegin sapUiNoPadding"
						visible="{= ${InScreenFilters>/ProjectSet/Country} === 'QC'}">
						<Text text="{i18n>ccq}" />
						<Text
							text="{path: 'Ccq', formatter:'.formatter.setEmptyString'}"
							editable="true" required="false" />
					</VBox>
					<ToolbarSpacer
						visible="{= ${InScreenFilters>/ProjectSet/Country} === 'QC'}" />
					<VBox class="sapUiSmallMarginBegin sapUiNoPadding"
						visible="{= ${InScreenFilters>/ProjectSet/Country} === 'QC'}">
						<Text text="{i18n>rule}" />
						<Text
							text="{path: 'Rule', formatter:'.formatter.setEmptyString'}"
							editable="true" required="false" />
					</VBox>
					<ToolbarSpacer
						visible="{= ${InScreenFilters>/ProjectSet/Country} === 'QC'}" />
					<VBox class="sapUiSmallMarginBegin sapUiNoPadding"
						visible="{= ${InScreenFilters>/ProjectSet/Country} === 'QC'}">
						<Text text="{i18n>workTime}" />
						<Text
							text="{
                         				path : 'WorkTimeBeg',
            						 	type: 'sap.ui.model.odata.type.Time',
            						 	formatOptions: {  
    										pattern : 'HH:mm'
									 	}
									 } {i18n>to} 
            						 {
            						 	path : 'WorkTimeEnd',
            						 	type: 'sap.ui.model.odata.type.Time',
            						 	formatOptions: {  
    										pattern : 'HH:mm'
									 	}
									 }" />
					</VBox>
					<ToolbarSpacer
						visible="{= ${InScreenFilters>/ProjectSet/Country} === 'QC'}" />
					<VBox class="sapUiSmallMarginBegin sapUiNoPadding"
						visible="{= ${InScreenFilters>/ProjectSet/Country} === 'QC'}">
						<Text text="{i18n>breakTime}" />
						<Text
							text="{
                         				path : 'BreakTimeBeg',
            						 	type: 'sap.ui.model.odata.type.Time',
            						 	formatOptions: {  
    										pattern : 'HH:mm'
									 	}
									 } {i18n>to} 
            						 {
            						 	path : 'BreakTimeEnd',
            						 	type: 'sap.ui.model.odata.type.Time',
            						 	formatOptions: {  
    										pattern : 'HH:mm'
									 	}
									 }" />
					</VBox>
					<ToolbarSpacer />
					<VBox class="sapUiSmallMarginEnd sapUiNoPadding">
						<Text text="{i18n>totalQtyDay}" />
						<Text
							text="{parts: [{path: 'TotalDayQty'}, {path: 'Unit'}], formatter:'.formatter.setEmptyUnit'}" />
					</VBox>
				</Toolbar>
			</Panel>
			<Panel height="416px" class="detailIconTab">
				<IconTabBar id="idLaborDetIconTabBar"
					stretchContentHeight="true" headerMode="Inline" expandable="false"
					class="sapUiResponsiveContentPadding sapUiTinyMarginTop">
					<items>
						<IconTabFilter id="icnTabDetails"
							key="{i18n>tabGeneral}" text="{i18n>tabGeneral}"
							class="detailIconTab" count="">
							<Toolbar>
								<ToolbarSpacer />
								<Button id="lockDetBtn" icon="sap-icon://locked"
									tooltip="{i18n>lock}" press="onPressDetLock" type="Transparent" />
								<Button id="cpyDetBtn" icon="sap-icon://copy"
									tooltip="{i18n>copy}" press="onPressCostCodeCopy"
									type="Transparent" />
								<Button id="addDetBtn" icon="sap-icon://add"
									tooltip="{i18n>add}" press="onPressCostCodeAdd"
									type="Transparent" />
								<Button id="delDetBtn" icon="sap-icon://delete"
									tooltip="{i18n>delete}" press="onPressDetDelete"
									type="Transparent" />
								<Button id="editDetBtn" icon="sap-icon://edit"
									tooltip="{i18n>edit}" press="onPressCostCodeEdit"
									type="Transparent" />
							</Toolbar>
							<ScrollContainer id="tableScroll"
								class="costCodeTable sapUiNoContentPadding" height="309px"
								vertical="true">
								<Table items="{}" id="costCodeList" mode="MultiSelect"
									selectionChange="onSelectDetItem" showNoData="true"
									sticky="ColumnHeaders"
									class="sapUiNoMargin sapUiNoContentPadding customDetailsTable customTable">
									<columns class="sapUiNoContentPadding">
										<Column width="1rem" />
										<Column width="8rem" hAlign="Center">
											<Text text="{i18n>costCode}" />
										</Column>
										<Column width="5rem" hAlign="Center">
											<Text text="{i18n>qtyDay}" />
										</Column>
										<Column width="4rem"
											visible="{= ${InScreenFilters>/ProjectSet/Country} === 'QC'}"
											hAlign="Center">
											<Text text="{i18n>td}" />
										</Column>
										<Column width="3rem" hAlign="Center">
											<Text text="{i18n>origin}" />
										</Column>
										<Column width="8rem" hAlign="Center">
											<Text text="{i18n>recPerson}" />
										</Column>
										<Column width="3rem" hAlign="Center">
											<Text text="{i18n>version}" />
										</Column>
										<Column width="3rem" hAlign="Center" />
									</columns>
									<items>
										<ColumnListItem id="detListTemplate"
											highlight="{ 
										path: 'IntStatus',
										formatter: '.formatter.setDetStatus'}">
											<customData>
												<core:CustomData key="disabled" value="true"
													writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
											</customData>
											<cells>
												<VBox>
													<ToggleButton id="flagDetBtn"
														icon="sap-icon://flag" pressed="{FlagInt}"
														press="onPressDetFlag" class="myFlagBtn myPressedFlagBtn"
														type="Transparent"
														visible="{= ${IntStatus} !== '6' &amp;&amp; ${IntStatus} !== '7'}" />
													<Button id="lockedDetBtn" icon="sap-icon://locked"
														class="myLockBtn myPressedLockBtn" press=""
														type="Transparent"
														visible="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
												</VBox>
												<VBox class="customTableText">
													<Text text="{CostCodeDes}" tooltip="{CostCodeDes}"
														wrapping="false" class="sapUiTinyMarginTop">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Text>
													<Text text="{CostCode}" class="sapUiTinyMarginBottom">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Text>
												</VBox>
												<Text text="{QtyDay} {Unit}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<Text text="{Td} {Unit}" class="customText"
													visible="{= ${InScreenFilters>/ProjectSet/Country} === 'QC'}">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<VBox>
													<Text text="{Origin}" class="customText"
														visible="{= ${Origin} === 'M'}" />
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
													<Link text="{Origin}" class="customLink"
														press="onPressPapyrusSummary"
														visible="{= ${Origin} === 'P'}">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Link>
												</VBox>
												<VBox class="customTableText">
													<Text text="{ForemanName}" tooltip="{ForemanName}"
														wrapping="false" class="sapUiTinyMarginTop">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Text>
													<Text text="{ForemanNo}" class="sapUiTinyMarginBottom">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Text>
												</VBox>
												<Text text="{Version}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<HBox justifyContent="End">
													<Button icon="sap-icon://overflow"
														press="onPressIntPop" type="Transparent"
														enabled="{= ${IntStatus} !== '0' &amp;&amp; ${IntStatus} !== '1' &amp;&amp; ${IntStatus} !== '6'}"
														tooltip="{i18n>integration}" />
													<Button icon="sap-icon://post"
														press="onPressCommentDialog" type="Transparent"
														enabled="{= ${Origin} === 'P'}" tooltip="{i18n>comment}" />
													<Text text="*"
														visible="{= ${FlagComment} === 'X' &amp;&amp; ${Origin} === 'P'}"
														class="sapUiNoMargin" />
												</HBox>
											</cells>
										</ColumnListItem>
									</items>
								</Table>
							</ScrollContainer>
						</IconTabFilter>
						<IconTabFilter id="icnTabBonus"
							key="{i18n>tabOther}" class="detailIconTab"
							text="{i18n>tabOther}" count="">
							<Toolbar>
								<ToolbarSpacer />
								<Button id="lockBonusBtn" icon="sap-icon://locked"
									press="onPressBonusLock" tooltip="{i18n>lock}"
									type="Transparent" />
								<Button id="cpyBonusBtn" icon="sap-icon://copy"
									tooltip="{i18n>copy}" press="onPressBonusCopy"
									type="Transparent" />
								<Button id="addBonusBtn" icon="sap-icon://add"
									press="onPressBonusAdd" tooltip="{i18n>add}" type="Transparent" />
								<Button id="delBonusBtn" icon="sap-icon://delete"
									tooltip="{i18n>delete}" press="onPressBonusDelete"
									type="Transparent" />
								<Button id="editBonusBtn" icon="sap-icon://edit"
									tooltip="{i18n>edit}" press="onPressBonusEdit"
									type="Transparent" />
							</Toolbar>
							<ScrollContainer id="bonusTableScroll"
								class="costCodeTable" height="309px" vertical="true">
								<Table id="bonusList" items="{}" mode="MultiSelect"
									selectionChange="onSelectAllBonus" showNoData="true"
									sticky="ColumnHeaders"
									class="sapUiNoMargin sapUiNoContentPadding customDetailsTable customTable">
									<columns class="sapUiNoContentPadding">
										<Column width="1rem" />
										<Column width="8rem" hAlign="Center">
											<Text text="{i18n>timePointingCode}" />
										</Column>
										<Column width="5rem" hAlign="Center">
											<Text text="{i18n>timeQty}" />
										</Column>
										<Column width="8rem" hAlign="Center">
											<Text text="{i18n>primePointingCode}" />
										</Column>
										<Column width="5rem" hAlign="Center">
											<Text text="{i18n>primeQty}" />
										</Column>
										<Column width="8rem" hAlign="Center">
											<Text text="{i18n>wbsElement}" />
										</Column>
										<Column width="6rem" hAlign="Center">
											<Text text="{i18n>activityType}" />
										</Column>
										<Column width="3rem" />
									</columns>
									<items>
										<ColumnListItem id="bonusListTemplate"
											highlight="{ 
										path: 'IntStatus',
										formatter: '.formatter.setDetStatus'}">
											<customData>
												<core:CustomData key="disabled" value="true"
													writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
											</customData>
											<cells>
												<VBox class="sapUiNoMargin sapUiNoContentPadding">
													<ToggleButton id="flagBonusBtn"
														icon="sap-icon://flag" pressed="{FlagInt}"
														press="onPressBonusFlag"
														class="myFlagBtn myPressedFlagBtn" type="Transparent"
														visible="{= ${IntStatus} !== '6' &amp;&amp; ${IntStatus} !== '7'}" />
													<Button id="lockedBonusBtn" icon="sap-icon://locked"
														class="myLockBtn myPressedLockBtn" press=""
														type="Transparent"
														visible="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
												</VBox>
												<Text text="{TypeOfHour}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<Text text="{HoursQty}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<Text text="{Bonus}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<Text text="{BonusQty}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<Text text="{WBSElement}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<Text text="{ActivityType}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<Button icon="sap-icon://overflow"
													press="onPressIntPop" type="Transparent"
													enabled="{= ${IntStatus} !== '0' &amp;&amp; ${IntStatus} !== '1' &amp;&amp; ${IntStatus} !== '6'}"
													tooltip="{i18n>integration}" />
											</cells>
										</ColumnListItem>
									</items>
								</Table>
							</ScrollContainer>
						</IconTabFilter>
					</items>
				</IconTabBar>
			</Panel>
		</content>
	</Page>
</mvc:View>