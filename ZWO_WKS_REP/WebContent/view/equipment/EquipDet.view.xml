<!--======================================================================-->
<!--==  E~CUBE                                                          ==-->
<!--==******************************************************************==-->
<!--==  AUTHOR             : Jean-Pierre Jerome (JPJ)                   ==-->
<!--==  DATE               : 13.08.2019                                 ==-->
<!--==  GAPID              : G01.001.05                                 ==-->
<!--==******************************************************************==-->
<!--==  DESCRIPTION        : SR 622921 – A FIORI front end app for      ==-->
<!--==                       labor, temporary workers, equipment,       ==-->
<!--==                       equipments, supplies, subcontracting,      ==-->
<!--==                       production quantities                      ==-->
<!--==                       COPY of ZCPJD1 – DEV 00549 from KHEOPS     ==-->
<!--======================================================================-->
<!--== MODIFICATIONS  HISTORY                                           ==-->
<!--======================================================================-->
<!--== DATE        AUTHOR         SR NUM       IDEN.   TRANS. REQ       ==-->
<!--==******************************************************************==-->
<!--   23.08.2019  JPJEROME       622921       JPJ      TR XXXXXXXXXX     -->
<!--======================================================================-->
<mvc:View
	controllerName="zwo.ui.wks_rep.controller.equipment.EquipDet"
	xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"
	xmlns:t="sap.ui.table" xmlns:l="sap.ui.layout"
	busy="{EquipDetView>/busy}"
	busyIndicatorDelay="{EquipDetView>/BusyDelay}">
	<Page id="equipdet"
		class="detailHeader sapUiNoMargin sapUiNoContentPadding"
		enableScrolling="true">
		<content>
			<Panel id="EquipmentHeaderPnl">
				<Toolbar height="auto" class="laborDetHeader">
					<VBox width="400px" class="sapUiSmallMarginBegin">
						<Text text="{EquipmentName}" class="myMasterBigFont" />
						<Text text="{EquipmentNo}" class="myMasterSmallFont" />
					</VBox>
					<ToolbarSpacer></ToolbarSpacer>
					<VBox width="200px" class="sapUiSmallMarginEnd sapUiNoMargin"
						alignItems="End">
						<Button icon="sap-icon://edit" press="onPressEquipEdit"
							type="Transparent"
							enabled="{path:'IntStatus', formatter: '.formatter.enableMasterEditBtn'}" />
						<HBox>
							<Text text="{Price}" class="myMasterBigFont" required="true"
								editable="true" />
							<Text text="{Currency}" class="myMasterBigFont" />
						</HBox>
						<Text text="{i18n>UnitPrice}" class="myMasterMediumFont" />
						<Text
							text="{= ${FuelFlag} === 'X' ? ${i18n>fuelIncluded} : ${i18n>fuelNotIncluded}}"
							class="myMasterMediumFont" />
					</VBox>
				</Toolbar>
				<Toolbar height="auto" class="sapUiTinyMarginTop">
					<VBox class="sapUiSmallMarginBegin sapUiNoContentPadding">
						<Text text="{MuName}" />
						<Text text="{Mu}" />
					</VBox>
					<ToolbarSpacer />
					<VBox class="sapUiSmallMarginBegin sapUiNoContentPadding">
						<Text text="{i18n>activityType}" />
						<Text text="{ActivityType}" required="true" />
					</VBox>
					<ToolbarSpacer />
					<VBox height="44px"
						class="sapUiNoMargin sapUiNoContentPadding" alignItems="Center">
						<Text text="{i18n>equipmentGang}"
							class="sapUiNoMargin sapUiNoContentPadding" />
						<CheckBox selected="{= ${EquipmentGang}}"
							editable="false" valueState="Information"
							class="sapUiNoMargin sapUiNoContentPadding" />
					</VBox>
					<ToolbarSpacer />
					<VBox class="sapUiSmallMarginEnd sapUiNoContentPadding">
						<Text text="{i18n>totalNonUse}" />
						<Text text="{TotQtyNonOperated} {Unit}" />
					</VBox>
					<ToolbarSpacer />
					<VBox class="sapUiSmallMarginEnd sapUiNoContentPadding">
						<Text text="{i18n>totalUse}" />
						<Text text="{TotQtyOperated} {Unit}" />
					</VBox>
				</Toolbar>
			</Panel>
			<Panel height="400px" class="detailIconTab">
				<IconTabBar id="idEquipmentDetIconTabBar"
					stretchContentHeight="true" headerMode="Inline" expandable="false"
					class="sapUiResponsiveContentPadding sapUiTinyMarginTop">
					<items>
						<IconTabFilter id="icnTabDetails"
							key="{i18n>tabGeneral}" text="{i18n>tabGeneral}"
							class="detailIconTab" count="">
							<Toolbar>
								<ToolbarSpacer />
								<Button id="lockDetBtn" icon="sap-icon://locked"
									tooltip="{i18n>lock}" press="onPressDetLock" type="Transparent" />
								<Button id="cpyDetBtn" icon="sap-icon://copy"
									tooltip="{i18n>copy}" press="onPressCostCodeCopy"
									type="Transparent" />
								<Button id="addDetBtn" icon="sap-icon://add"
									tooltip="{i18n>add}" press="onPressCostCodeAdd"
									type="Transparent" />
								<Button id="delDetBtn" icon="sap-icon://delete"
									tooltip="{i18n>delete}" press="onPressDetDelete"
									type="Transparent" />
								<Button id="editDetBtn" icon="sap-icon://edit"
									tooltip="{i18n>edit}" press="onPressCostCodeEdit"
									type="Transparent" />
							</Toolbar>
							<ScrollContainer id="tableScroll"
								class="costCodeTable" height="292px" vertical="true">
								<Table items="{}" id="costCodeList" mode="MultiSelect"
									selectionChange="onSelectDetItem" showNoData="true"
									sticky="ColumnHeaders"
									class="sapUiNoMargin sapUiNoContentPadding customDetailsTable customTable">
									<columns class="sapUiNoContentPadding">
										<Column width="1rem" />
										<Column width="8rem" hAlign="Center">
											<Text text="{i18n>costCode}" />
										</Column>
										<Column width="5rem" hAlign="Center">
											<Text text="{i18n>qtyDay}" />
										</Column>
										<Column width="3rem" hAlign="Center">
											<Text text="{i18n>status}" />
										</Column>
										<Column width="3rem" hAlign="Center">
											<Text text="{i18n>origin}" />
										</Column>
										<Column width="8rem" hAlign="Center">
											<Text text="{i18n>recPerson}" />
										</Column>
										<Column width="3rem" hAlign="Center">
											<Text text="{i18n>version}" />
										</Column>
										<Column width="3rem" hAlign="Center" />
									</columns>
									<items>
										<ColumnListItem id="detListTemplate"
											highlight="{ 
												path: 'IntStatus',
												formatter: '.formatter.setDetStatus'}">
											<customData>
												<core:CustomData key="disabled" value="true"
													writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
											</customData>
											<cells>
												<VBox>
													<ToggleButton id="flagEquipBtn"
														icon="sap-icon://flag" pressed="{FlagInt}"
														press="onPressDetFlag" class="myFlagBtn myPressedFlagBtn"
														type="Transparent"
														visible="{= ${IntStatus} !== '6' &amp;&amp; ${IntStatus} !== '7'}" />
													<Button id="lockedEquipBtn" icon="sap-icon://locked"
														class="myLockBtn myPressedLockBtn" press=""
														type="Transparent"
														visible="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
												</VBox>
												<VBox class="customTableText">
													<Text text="{CostCodeDes}" tooltip="{CostCodeDes}"
														wrapping="false" class="sapUiTinyMarginTop">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Text>
													<Text text="{CostCode}" class="sapUiTinyMarginBottom">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Text>
												</VBox>
												<Text text="{Quantity} {Unit}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<Text text="{Status}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<VBox>
													<Text text="{Origin}" class="customText"
														visible="{= ${Origin} === 'M'}" />
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
													<Link text="{Origin}" class="customLink"
														press="onPressPapyrusSummary"
														visible="{= ${Origin} === 'P'}">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Link>
												</VBox>
												<VBox class="customTableText">
													<Text text="{ForemanName}" tooltip="{ForemanName}"
														wrapping="false" class="sapUiTinyMarginTop">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Text>
													<Text text="{ForemanNo}" class="sapUiTinyMarginBottom">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Text>
												</VBox>
												<Text text="{Version}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<HBox justifyContent="End">
													<Button icon="sap-icon://overflow"
														press="onPressIntPop" type="Transparent"
														tooltip="{i18n>integration}"
														enabled="{= ${IntStatus} !== '0' &amp;&amp; ${IntStatus} !== '1' &amp;&amp; ${IntStatus} !== '6'}" />
													<Button icon="sap-icon://post"
														press="onPressCommentDialog" type="Transparent"
														enabled="{= ${Origin} === 'P'}" tooltip="{i18n>comment}" />
													<Text text="*"
														visible="{= ${FlagComment} === 'X' &amp;&amp; ${Origin} === 'P'}"
														class="sapUiNoMargin" />
												</HBox>
											</cells>
										</ColumnListItem>
									</items>
								</Table>
							</ScrollContainer>
						</IconTabFilter>
					</items>
				</IconTabBar>
			</Panel>
		</content>
	</Page>
</mvc:View>