<!--======================================================================-->
<!--==  E~CUBE                                                          ==-->
<!--==******************************************************************==-->
<!--==  AUTHOR             : Jean-Pierre Jerome (JPJ)                   ==-->
<!--==  DATE               : 13.08.2019                                 ==-->
<!--==  GAPID              : G01.001.05                                 ==-->
<!--==******************************************************************==-->
<!--==  DESCRIPTION        : SR 622921 – A FIORI front end app for      ==-->
<!--==                       labor, temporary workers, equipment,       ==-->
<!--==                       equipments, supplies, subcontracting,      ==-->
<!--==                       production quantities                      ==-->
<!--==                       COPY of ZCPJD1 – DEV 00549 from KHEOPS     ==-->
<!--======================================================================-->
<!--== MODIFICATIONS  HISTORY                                           ==-->
<!--======================================================================-->
<!--== DATE        AUTHOR         SR NUM       IDEN.   TRANS. REQ       ==-->
<!--==******************************************************************==-->
<!--   23.08.2019  JPJEROME       622921       JPJ      TR XXXXXXXXXX     -->
<!--======================================================================-->
<mvc:View
	controllerName="zwo.ui.wks_rep.controller.internal.InternalDet"
	xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"
	xmlns:t="sap.ui.table" busy="{InternalDetView>/busy}"
	busyIndicatorDelay="{InternalDetView>/BusyDelay}">
	<Page id="internaldet"
		class="detailHeader sapUiNoMargin sapUiNoContentPadding"
		enableScrolling="true">
		<content>
			<Panel id="InternalHeaderPnl">
				<Toolbar height="auto" class="laborDetHeader">
					<VBox width="200px" class="sapUiSmallMarginBegin">
						<Text text="{MaterialDesc}" class="myMasterBigFont" />
						<Text text="{MaterialNo}" class="myMasterSmallFont" />
					</VBox>
					<ToolbarSpacer></ToolbarSpacer>
					<VBox width="200px" class="sapUiSmallMarginEnd sapUiNoMargin"
						alignItems="End">
						<Button icon="sap-icon://edit" press="onPressInternalEdit"
							type="Transparent"
							enabled="{path:'IntStatus', formatter: '.formatter.enableMasterEditBtn'}"
							tooltip="{i18n>edit}" />
						<HBox>
							<Text text="{Price}" class="myMasterBigFont" required="true"
								editable="true" />
							<Text text="{Currency}" class="myMasterBigFont" />
						</HBox>
						<Text text="{i18n>UnitPrice}" class="myMasterMediumFont" />
					</VBox>
				</Toolbar>
				<Toolbar height="auto" class="sapUiTinyMarginTop">
					<VBox class="sapUiSmallMarginBegin sapUiNoPadding">
						<Text text="{Name}" />
						<Text
							text="{path: 'WbsElement', formatter: '.formatter.formatWbs'}" />
					</VBox>
					<ToolbarSpacer />
					<VBox class="sapUiSmallMarginEnd sapUiNoPadding">
						<Text text="{i18n>totalQtyDay}" />
						<Text text="{Quantity} {Unit}" />
					</VBox>
				</Toolbar>
			</Panel>
			<Panel height="415px" class="detailIconTab">
				<IconTabBar id="idInternalDetIconTabBar"
					stretchContentHeight="true" headerMode="Inline" expandable="false"
					class="sapUiResponsiveContentPadding sapUiTinyMarginTop">
					<items>
						<IconTabFilter id="icnTabDetails"
							key="{i18n>tabGeneral}" text="{i18n>tabGeneral}"
							class="detailIconTab" count="">
							<Toolbar>
								<ToolbarSpacer />
								<Button id="lockDetBtn" icon="sap-icon://locked"
									tooltip="{i18n>lock}" press="onPressInternalCCLock"
									type="Transparent" />
								<Button id="cpyDetBtn" icon="sap-icon://copy"
									tooltip="{i18n>copy}" press="onPressInternalCCCopy"
									type="Transparent" />
								<Button id="addDetBtn" icon="sap-icon://add"
									tooltip="{i18n>add}" press="onPressInternalCCAdd"
									type="Transparent" />
								<Button id="delDetBtn" icon="sap-icon://delete"
									tooltip="{i18n>delete}" press="onPressInternalCCDelete"
									type="Transparent" />
								<Button id="editDetBtn" icon="sap-icon://edit"
									tooltip="{i18n>edit}" press="onPressInternalCCEdit"
									type="Transparent" />
							</Toolbar>
							<ScrollContainer id="tableScroll"
								class="costCodeTable" height="300px" vertical="true">
								<Table items="{}" id="costCodeList" mode="MultiSelect"
									selectionChange="onSelectDetItem" showNoData="true"
									class="sapUiNoMargin sapUiNoContentPadding customTable customDetailsTable">
									<columns class="sapUiNoContentPadding">
										<Column width="1rem" />
										<Column width="8rem" hAlign="Center">
											<Text text="{i18n>costCode}" />
										</Column>
										<Column width="5rem" hAlign="Center">
											<Text text="{i18n>quantity}" />
										</Column>
										<Column width="5rem" hAlign="Center">
											<Text text="{i18n>delNote}" />
										</Column>
										<Column width="3rem" hAlign="Center">
											<Text text="{i18n>origin}" />
										</Column>
										<Column width="8rem" hAlign="Center">
											<Text text="{i18n>recPerson}" />
										</Column>
										<Column width="3rem" hAlign="Center">
											<Text text="{i18n>version}" />
										</Column>
										<Column width="7rem" hAlign="Center" />
									</columns>
									<items>
										<ColumnListItem id="detListTemplate"
											highlight="{ 
													path: 'IntStatus',
													formatter: '.formatter.setDetStatus'}">
											<customData>
												<core:CustomData key="disabled" value="true"
													writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
											</customData>
											<cells>
												<VBox>
													<ToggleButton id="flagDetBtn"
														icon="sap-icon://flag" pressed="{FlagInt}"
														press="onPressInternalDetFlag"
														class="myFlagBtn myPressedFlagBtn" type="Transparent"
														visible="{= ${IntStatus} !== '6' &amp;&amp; ${IntStatus} !== '7'}" />
													<Button id="lockedDetBtn" icon="sap-icon://locked"
														class="myLockBtn myPressedLockBtn"
														press="onPressInternalDetLock" type="Transparent"
														visible="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
												</VBox>
												<VBox class="customTableText">
													<Text text="{CostCodeDes}" tooltip="{CostCodeDes}"
														wrapping="false" class="sapUiTinyMarginTop">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Text>
													<Text text="{CostCode}" class="sapUiTinyMarginBottom">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Text>
												</VBox>
												<Text text="{QuantityCC} {Unit}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<Text text="{DeliveryNoteNo}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<VBox>
													<Text text="{Origin}" class="customText"
														visible="{= ${Origin} === 'M'}" />
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
													<Link text="{Origin}" class="customLink"
														press="onPressPapyrusSummary"
														visible="{= ${Origin} === 'P'}">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Link>
												</VBox>
												<VBox class="customTableText">
													<Text text="{ForemanName}" tooltip="{ForemanName}"
														wrapping="false" class="sapUiTinyMarginTop">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Text>
													<Text text="{ForemanNo}" class="sapUiTinyMarginBottom">
														<customData>
															<core:CustomData key="disabled"
																value="true"
																writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
														</customData>
													</Text>
												</VBox>
												<Text text="{Version}" class="customText">
													<customData>
														<core:CustomData key="disabled"
															value="true"
															writeToDom="{= ${IntStatus} === '6' || ${IntStatus} === '7'}" />
													</customData>
												</Text>
												<HBox justifyContent="End">
													<Button text="STCK" press="onPressStck"
														type="Default" class="stckBtn" visible="true" />
													<Button icon="sap-icon://overflow"
														press="onPressIntPop" type="Transparent"
														tooltip="{i18n>integration}"
														enabled="{= ${IntStatus} !== '0' &amp;&amp; ${IntStatus} !== '1' &amp;&amp; ${IntStatus} !== '6'}" />
													<Button icon="sap-icon://post"
														press="onPressCommentDialog" type="Transparent"
														enabled="{= ${Origin} === 'P'}" tooltip="{i18n>comment}" />
													<Text text="*"
														visible="{= ${FlagComment} === 'X' &amp;&amp; ${Origin} === 'P'}"
														class="sapUiNoMargin" />
												</HBox>
											</cells>
										</ColumnListItem>
									</items>
								</Table>
							</ScrollContainer>
						</IconTabFilter>
					</items>
				</IconTabBar>
			</Panel>
		</content>
	</Page>
</mvc:View>